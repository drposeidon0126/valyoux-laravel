!function(e){"use strict";e.event.special.destroyed||(e.event.special.destroyed={remove:function(e){e.handler&&e.handler()}}),e.fn.extend({maxlength:function(t,a){function n(e){var a=e.val();a=t.twoCharLinebreak?a.replace(/\r(?!\n)|\n(?!\r)/g,"\r\n"):a.replace(new RegExp("\r?\n","g"),"\n");return t.utf8?function(e){for(var t=0,a=0;a<e.length;a++){var n=e.charCodeAt(a);128>n?t++:t+=n>127&&2048>n?2:3}return t}(a):a.length}function o(e,a,o){var s=!0;return!t.alwaysShow&&o-n(e)>a&&(s=!1),s}function s(e,t){return t-n(e)}function r(e,t){t.css({display:"block"}),e.trigger("maxlength.shown")}function i(e,a,n){var o="";return t.message?o="function"==typeof t.message?t.message(e,a):t.message.replace("%charsTyped%",n).replace("%charsRemaining%",a-n).replace("%charsTotal%",a):(t.preText&&(o+=t.preText),o+=t.showCharsTyped?n:a-n,t.showMaxLength&&(o+=t.separator+a),t.postText&&(o+=t.postText)),o}function l(e,a,n,s){s&&(s.html(i(a.val(),n,n-e)),e>0?o(a,t.threshold,n)?r(a,s.removeClass(t.limitReachedClass).addClass(t.warningClass)):function(e,t){t.css({display:"none"}),e.trigger("maxlength.hidden")}(a,s):r(a,s.removeClass(t.warningClass).addClass(t.limitReachedClass))),t.allowOverMax&&(0>e?a.addClass("overmax"):a.removeClass("overmax"))}function h(a,n){var o=function(t){var a=t[0];return e.extend({},"function"==typeof a.getBoundingClientRect?a.getBoundingClientRect():{width:a.offsetWidth,height:a.offsetHeight},t.offset())}(a);if("function"!==e.type(t.placement))if(e.isPlainObject(t.placement))!function(a,n){if(a&&n){var o={};e.each(["top","bottom","left","right","position"],function(e,a){var n=t.placement[a];void 0!==n&&(o[a]=n)}),n.css(o)}}(t.placement,n);else{var s=a.outerWidth(),r=n.outerWidth(),i=n.width(),l=n.height();switch(t.appendToParent&&(o.top-=a.parent().offset().top,o.left-=a.parent().offset().left),t.placement){case"bottom":n.css({top:o.top+o.height,left:o.left+o.width/2-i/2});break;case"top":n.css({top:o.top-l,left:o.left+o.width/2-i/2});break;case"left":n.css({top:o.top+o.height/2-l/2,left:o.left-i});break;case"right":n.css({top:o.top+o.height/2-l/2,left:o.left+o.width});break;case"bottom-right":n.css({top:o.top+o.height,left:o.left+o.width});break;case"top-right":n.css({top:o.top-l,left:o.left+s});break;case"top-left":n.css({top:o.top-l,left:o.left-r});break;case"bottom-left":n.css({top:o.top+a.outerHeight(),left:o.left-r});break;case"centered-right":n.css({top:o.top+l/2,left:o.left+s-r-3});break;case"bottom-right-inside":n.css({top:o.top+o.height,left:o.left+o.width-r});break;case"top-right-inside":n.css({top:o.top-l,left:o.left+s-r});break;case"top-left-inside":n.css({top:o.top-l,left:o.left});break;case"bottom-left-inside":n.css({top:o.top+a.outerHeight(),left:o.left})}}else t.placement(a,n,o)}function c(e){var a="maxlength";return t.allowOverMax&&(a="data-bs-mxl"),e.attr(a)||e.attr("size")}var p=e("body");return e.isFunction(t)&&!a&&(a=t,t={}),t=e.extend({showOnReady:!1,alwaysShow:!1,threshold:10,warningClass:"label label-success",limitReachedClass:"label label-important label-danger",separator:" / ",preText:"",postText:"",showMaxLength:!0,placement:"bottom",message:null,showCharsTyped:!0,validate:!1,utf8:!1,appendToParent:!1,twoCharLinebreak:!0,allowOverMax:!1},t),this.each(function(){function a(){var a=i(r.val(),n,"0");n=c(r),o||(o=e('<span class="bootstrap-maxlength"></span>').css({display:"none",position:"absolute",whiteSpace:"nowrap",zIndex:1099}).html(a)),r.is("textarea")&&(r.data("maxlenghtsizex",r.outerWidth()),r.data("maxlenghtsizey",r.outerHeight()),r.mouseup(function(){(r.outerWidth()!==r.data("maxlenghtsizex")||r.outerHeight()!==r.data("maxlenghtsizey"))&&h(r,o),r.data("maxlenghtsizex",r.outerWidth()),r.data("maxlenghtsizey",r.outerHeight())})),t.appendToParent?(r.parent().append(o),r.parent().css("position","relative")):p.append(o),l(s(r,c(r)),r,n,o),h(r,o)}var n,o,r=e(this);e(window).resize(function(){o&&h(r,o)}),t.allowOverMax&&(e(this).attr("data-bs-mxl",e(this).attr("maxlength")),e(this).removeAttr("maxlength")),t.showOnReady?r.ready(function(){a()}):r.focus(function(){a()}),r.on("maxlength.reposition",function(){h(r,o)}),r.on("destroyed",function(){o&&o.remove()}),r.on("blur",function(){o&&!t.showOnReady&&o.remove()}),r.on("input",function(){var e=c(r),a=s(r,e),i=!0;return t.validate&&0>a?(function(e,a){var n=e.val(),o=0;t.twoCharLinebreak&&"\n"===(n=n.replace(/\r(?!\n)|\n(?!\r)/g,"\r\n")).substr(n.length-1)&&n.length%2==1&&(o=1),e.val(n.substr(0,a-o))}(r,e),i=!1):l(a,r,n,o),("bottom-right-inside"===t.placement||"top-right-inside"===t.placement)&&h(r,o),i})})}})}(jQuery);
