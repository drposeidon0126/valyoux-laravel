var updateid="",selectedstatus="",taskid="";function editcarddeatil(e){updateid=e,$("#updatecarddetail").css("display","block"),$("#addcard").css("display","none"),$(".update-card-title").css("display","block"),$(".add-card-title").css("display","none");var a=$(e).find("#cd-name").text(),d=$(e).find("#cd-desc").text(),t=parseInt($(e).find("#cd-budget").text().replace(/[^0-9.]/g,"")),s=$(e).find("#cd-status").text();$("#cd-cardassignee input").prop("checked",!1),$(e).find(".cd-assigne a").each(function(){var e=$(this).attr("value");$("#"+e).prop("checked",!0)}),$("#cd-cardname").val(a),$("#cd-carddesc").val(d),$("#cd-cardbudget").val(t),$("#StatusSelect").val(s),selectedstatus=s}function detelecard(e){console.log("Successfully Card Delete"),$(e).remove()}function makeid(e){for(var a="",d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=d.length,s=0;s<e;s++)a+=d.charAt(Math.floor(Math.random()*t));return a}function Addnewcard(e){$("#updatecarddetail").css("display","none"),$("#addcard").css("display","block"),$(".update-card-title").css("display","none"),$(".add-card-title").css("display","block"),$("#cd-cardname").val(""),$("#cd-carddesc").val(""),$("#StatusSelect").val("Pending"),$("#cd-cardbudget").val(""),$("#cd-cardassignee input").prop("checked",!1),taskid=e}$(document).ready(function(){$("select#StatusSelect").change(function(){selectedstatus=$(this).children("option:selected").val()}),$("#addcard").click(function(){$("#updatecarddetail").css("display","none"),$("#addcard").css("display","block"),$(".update-card-title").css("display","none"),$(".add-card-title").css("display","block");var e=makeid(5),a=$("#cd-cardname").val(),d=new Date,t=d.getDate()+" "+d.toLocaleString("default",{month:"short"})+", "+d.getFullYear(),s=$("#cd-carddesc").val(),c="";s.length>0&&(c="<ul class='pl-3 mb-4 text-muted' id='cd-desc'><li class='py-1'>"+s+"</li></ul>");var l,r=$("#cd-cardbudget").val(),n=new Array,o=new Array,u="";for($("#cd-cardassignee input[type=checkbox]:checked").each(function(){o.push($(this).attr("id")),n.push($(this).nextAll("img").attr("src"))}),i=0;i<n.length;i++)u=u+'<a href="#" class="team-member d-inline-block" value="'+o[i]+'"><img src="'+n[i]+'" class="rounded-circle avatar-xs m-1" alt=""></a>';"Waiting"==selectedstatus?l="badge-soft-secondary":"Approved"==selectedstatus?l="badge-soft-primary":"Complete"==selectedstatus?l="badge-soft-success":"Pending"==selectedstatus&&(l="badge-soft-warning"),0==a.length||0==r.length||0==selectedstatus.length||0==n.length?($("#NewcardForm").validate().element("#cd-cardname"),$("#NewcardForm").validate().element("#StatusSelect"),$("#NewcardForm").validate().element("#cd-cardbudget")):($(taskid).append("<div class='card task-box' id='"+e+"'><div class='card-body'><div class='dropdown float-right'><a href='#' class='dropdown-toggle arrow-none' data-toggle='dropdown' aria-expanded='false'><i class='mdi mdi-dots-vertical m-0 text-muted h5'></i></a><div class='dropdown-menu dropdown-menu-right'><a class='dropdown-item' href='#' data-toggle='modal' data-target='.bs-example-modal-center' onclick=editcarddeatil('#"+e+"')>Edit</a><a class='dropdown-item' href='#' onclick=detelecard('#"+e+"')>Delete</a></div></div><div class='float-right ml-2'><span class='badge badge-pill font-size-12 "+l+"' id='cd-status'>"+selectedstatus+"</span></div><div><h5 class='font-size-15'><a href='javascript: void(0);' class='text-dark' id='cd-name'>"+a+"</a></h5><p class='text-muted' id='cd-date'>"+t+"</p></div>"+c+"<div class='team float-left cd-assigne'>"+u+"</div><div class='text-right'><h5 class='font-size-15 mb-1' id='cd-budget'>$ "+r+"</h5><p class='mb-0 text-muted'>Budget</p></div></div></div>"),$("#modalForm").modal("toggle"))}),$("#updatecarddetail").click(function(){var e;"Waiting"==selectedstatus?e="badge-soft-secondary":"Approved"==selectedstatus?e="badge-soft-primary":"Complete"==selectedstatus?e="badge-soft-success":"Pending"==selectedstatus&&(e="badge-soft-warning");var a=$("#cd-cardname").val(),d=new Date,t=d.getDate()+" "+d.toLocaleString("default",{month:"short"})+", "+d.getFullYear(),s=$("#cd-carddesc").val(),c=$("#cd-cardbudget").val(),l=new Array,r=new Array,n="";for($("#cd-cardassignee input[type=checkbox]:checked").each(function(){r.push($(this).attr("id")),l.push($(this).nextAll("img").attr("src"))}),i=0;i<l.length;i++)n=n+'<a href="#" class="team-member d-inline-block" value="'+r[i]+'"><img src="'+l[i]+'" class="rounded-circle avatar-xs m-1" alt=""></a>';var o="";s.length>0&&(o="<ul class='pl-3 mb-4 text-muted' id='cd-desc'><li class='py-1'>"+s+"</li></ul>"),0==a.length||0==c.length||0==selectedstatus.length||0==l.length?($("#NewcardForm").validate().element("#cd-cardname"),$("#NewcardForm").validate().element("#StatusSelect"),$("#NewcardForm").validate().element("#cd-cardbudget")):$(updateid).html("<div class='card-body'><div class='dropdown float-right'><a href='#' class='dropdown-toggle arrow-none' data-toggle='dropdown' aria-expanded='false'><i class='mdi mdi-dots-vertical m-0 text-muted h5'></i></a><div class='dropdown-menu dropdown-menu-right'><a class='dropdown-item' href='#' data-toggle='modal' data-target='.bs-example-modal-center' onclick=editcarddeatil('"+updateid+"')>Edit</a><a class='dropdown-item' href='#' onclick=detelecard('"+updateid+"')>Delete</a></div></div> <div class='float-right ml-2'><span class='badge badge-pill font-size-12 "+e+"' id='cd-status'>"+selectedstatus+"</span></div><div><h5 class='font-size-15'><a href='javascript: void(0);' class='text-dark' id='cd-name'>"+a+"</a></h5><p class='text-muted'>"+t+"</p></div>"+o+"<div class='team float-left cd-assigne'>"+n+"</div><div class='text-right'><h5 class='font-size-15 mb-1' id='cd-budget'>$ "+c+"</h5><p class='mb-0 text-muted'>Budget</p></div></div>")})});
